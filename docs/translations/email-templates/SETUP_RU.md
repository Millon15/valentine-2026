# Руководство по настройке EmailJS

В этом руководстве описывается процесс настройки EmailJS для отправки ответов на викторину из приложения Valentine's 2026.

## Обзор

EmailJS позволяет отправлять электронные письма напрямую из вашего веб-приложения без использования бэкенд-сервера. Викторина использует EmailJS для отправки ответов пользователей на ваш адрес электронной почты.

## Шаг 1: Создайте бесплатную учетную запись EmailJS

1. Перейдите на [emailjs.com](https://www.emailjs.com/)
2. Нажмите **"Sign Up"** в правом верхнем углу
3. Выберите **"Sign up with Google"** или **"Sign up with Email"**
4. Завершите процесс регистрации
5. Подтвердите свой адрес электронной почты

## Шаг 2: Создайте почтовый сервис (Email Service)

EmailJS должен знать, какой почтовый сервис использовать (Gmail, Outlook и т.д.).

### Вариант А: Использование Gmail

1. В панели управления EmailJS нажмите **"Email Services"** (левая боковая панель)
2. Нажмите **"Add Service"**
3. Выберите **"Gmail"** из списка
4. Нажмите **"Connect with Gmail"**
5. Войдите в свою учетную запись Gmail
6. Предоставьте EmailJS разрешение на отправку писем
7. Скопируйте **Service ID** (выглядит как `service_abc123def456`)
8. Сохраните его для дальнейшего использования (Шаг 4)

### Вариант Б: Использование Outlook/Microsoft 365

1. В панели управления EmailJS нажмите **"Email Services"**
2. Нажмите **"Add Service"**
3. Выберите **"Gmail"** из списка (Примечание: интерфейс может отличаться, ищите Outlook, если доступен, или следуйте инструкциям для других провайдеров)
4. Введите свой email и пароль
5. Скопируйте **Service ID**
6. Сохраните его для дальнейшего использования (Шаг 4)

### Вариант В: Использование другого почтового провайдера

1. В панели управления EmailJS нажмите **"Email Services"**
2. Нажмите **"Add Service"**
3. Выберите своего почтового провайдера (Yahoo, SendGrid и т.д.)
4. Следуйте инструкциям, специфичным для провайдера
5. Скопируйте **Service ID**
6. Сохраните его для дальнейшего использования (Шаг 4)

## Шаг 3: Создайте шаблон письма (Email Template)

Шаблоны писем определяют, как ответы на викторину будут отформатированы в письме.

1. В панели управления EmailJS нажмите **"Email Templates"** (левая боковая панель)
2. Нажмите **"Create New Template"**
3. Дайте ему название (например, "Quiz Answers")
4. Вставьте содержимое файла `email-templates/quiz-answers.html` в редактор **HTML Content**
5. Скопируйте **Template ID** (выглядит как `template_xyz789abc123`)
6. Не забудьте нажать **Save** (маленькая синяя кнопка где-то справа!)

## Шаг 4: Получите свой публичный ключ (Public Key)

1. В панели управления EmailJS нажмите **"Account"** (меню в правом верхнем углу)
2. Нажмите **"API Keys"**
3. Скопируйте свой **Public Key** (выглядит как `pk_abc123xyz789def456`)
4. Сохраните его для дальнейшего использования

## Шаг 5: Добавьте учетные данные в ваш файл `.env`

1. В корне проекта создайте или отредактируйте файл `.env` (если его нет)
2. Добавьте эти три строки:
   ```
   EMAILJS_SERVICE_ID=your_service_id_here
   EMAILJS_TEMPLATE_ID=your_template_id_here
   EMAILJS_PUBLIC_KEY=your_public_key_here
   ```
3. Замените значения-заполнители на ваши реальные ID из шагов 2, 3 и 4:
   - `your_service_id_here` → Ваш Service ID (например, `service_abc123`)
   - `your_template_id_here` → Ваш Template ID (например, `template_xyz789`)
   - `your_public_key_here` → Ваш Public Key (например, `pk_abc123xyz789`)

**Пример:**

```
EMAILJS_SERVICE_ID=service_a1b2c3d4e5f6g7h8
EMAILJS_TEMPLATE_ID=template_x9y8z7w6v5u4t3s2
EMAILJS_PUBLIC_KEY=pk_live_abc123xyz789def456ghi789
```

## Шаг 6: Перезапустите сервер разработки

После обновления `.env` перезапустите сервер разработки:

```bash
bun run dev
```

Приложение теперь будет отправлять ответы на викторину на вашу электронную почту, когда пользователи будут отправлять форму.

## Устранение неполадок

### Предупреждение "EmailJS not fully configured"

**Проблема:** Вы видите это предупреждение в консоли браузера.

**Решение:** Убедитесь, что все три переменные окружения установлены в `.env`:

- `EMAILJS_SERVICE_ID`
- `EMAILJS_TEMPLATE_ID`
- `EMAILJS_PUBLIC_KEY`

Перезапустите сервер разработки после обновления `.env`.

### Письма не приходят

**Проблема:** Отправка викторины завершается, но письма не приходят.

**Возможные причины:**

1. Проверьте папку спам/нежелательная почта
2. Убедитесь, что почтовый сервис подключен в панели управления EmailJS
3. Проверьте консоль браузера на наличие сообщений об ошибках (F12 → вкладка Console)
4. Убедитесь, что ваш Template ID правильный в `.env`

### Ошибка "Service not found"

**Проблема:** Вы видите эту ошибку в консоли.

**Решение:** Дважды проверьте, что ваш Service ID в `.env` точно соответствует тому, что показано в панели управления EmailJS. Скопируйте и вставьте, чтобы избежать опечаток.

### Ошибка "Template not found"

**Проблема:** Вы видите эту ошибку в консоли.

**Решение:** Дважды проверьте, что ваш Template ID в `.env` точно соответствует тому, что показано в панели управления EmailJS.

## Примечания по безопасности

- **Никогда не коммитьте `.env` в Git** - Он уже находится в `.gitignore`
- **Public Key безопасно раскрывать** - Он предназначен быть публичным (используется в браузере)
- **Service ID и Template ID являются полу-публичными** - Они видны в вашей панели управления EmailJS, но их не следует распространять без необходимости
- **Держите ваш файл `.env` в секрете** - Не делитесь им с другими

## Тестирование EmailJS

Чтобы проверить, работает ли EmailJS:

1. Откройте приложение викторины в браузере
2. Пройдите викторину и отправьте ее
3. Проверьте свой почтовый ящик (и папку спам)
4. Вы должны получить письмо с ответами на викторину

Если вы не получили письмо, проверьте консоль браузера (F12) на наличие сообщений об ошибках.

## Следующие шаги

- Настройте шаблон письма в соответствии с вашим брендингом
- Добавьте дополнительные переменные шаблона, если необходимо
- Протестируйте с различными почтовыми провайдерами
- Следите за использованием EmailJS в панели управления (бесплатный тариф имеет ограничения)

## Ограничения бесплатного тарифа

EmailJS предлагает бесплатный тариф со следующими ограничениями:

- 200 писем в месяц
- Неограниченное количество шаблонов писем
- Неограниченное количество почтовых сервисов

Если вы превысите лимиты бесплатного тарифа, вы можете перейти на платный план в настройках учетной записи EmailJS.

## Поддержка

Для получения дополнительной информации о EmailJS:

- [Документация EmailJS](https://www.emailjs.com/docs/)
- [Справочник SDK EmailJS](https://www.emailjs.com/docs/sdk/send/)
- [Поддержка EmailJS](https://www.emailjs.com/support/)
